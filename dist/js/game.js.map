{"version":3,"sources":["snake/src/js/game.js"],"names":["Game","mapElement","scoreElement","highScoreElement","gameOverElement","startElement","startButtonElement","this","_score","_scoreElement","_highscoreElement","_mapElement","_startElement","SnakeMap","_startButtonElement","_map","placeApple","_snake","Snake","renderScore","document","gameOver","bind","addEventListener","foundApple","changeDirection","handleClick","clickHandler","y","e","clientY","x","removeEventListener","hideGameOver","reset","hideStartElement","startMove","showStartButton","getFields","increaseScore","hideStartButton","innerHTML","renderHighscore","_gameOverElement","classList","remove","renderGameOver","add","localStorage","getItem","saveHighscore","window","existingHighscore","parseInt","setItem"],"mappings":"uZAAMA,gBACF,SAAAA,EACIC,EACAC,EACAC,EACAC,EACAC,EACAC,GAPFN,gBAAAA,KAAAA,GACFO,KAAAC,OACIP,EAMFM,KAAAE,cAAAP,EAGEK,KAAKG,kBAAoBP,EAFzBI,KAAKC,YAALP,EACAM,KAAKE,iBAAgBP,EACrBK,KAAKG,cAAoBP,EACzBI,KAAKI,oBAALL,EAEAC,KAAKK,KAAAA,IAALC,SAAqBR,IACrBE,KAAKO,KAAAA,OAAAA,KAALH,aAEAJ,KAAAQ,KAAYC,aAGZT,KAAKU,OAAS,IAAIC,MAAM,EAAGX,KAAKQ,KAAM,CAAC,GAAI,KAF3CR,KAAAY,cACAC,SAAUJ,iBAAV,aAAAT,KAAAc,SAAAC,KAAAf,OAKAa,SAASG,iBAAiB,cAAehB,KAAKiB,WAAWF,KAAKf,OAJ9Da,SAAAG,iBAA2B,UAAWhB,KAAxBkB,gBAAdH,KAAAf,OAGAa,KAASG,aAAAA,KAAiBG,YAAcJ,KAAKD,+DAEpCE,GAET,IAAKI,EAAAA,EAAAA,QACRC,EAAAC,EAAAC,QAIGvB,KAAKU,OAAOS,YAAY,CAACK,EAAGH,4CAEhBC,GACZtB,KAAKU,OAAOQ,gBANDI,mCASXtB,KAAKI,YAAYqB,oBAAoB,QAASzB,KAAKoB,cANnDpB,KAAKU,OAAOS,EACfnB,KAAAY,cAQGZ,KAAK0B,eACL1B,KAAKU,OAAOiB,wCAIZ3B,KAAKI,YAAYY,iBAAiB,QAAShB,KAAKoB,cAChDpB,KAAK4B,mBACL5B,KAAKU,OAAOmB,YAVZ7B,KAAKI,qDAELJ,KAAKY,OAAAA,OACLZ,KAAK0B,iBAaL1B,KAAK8B,uDAGL9B,KAAKQ,KAAKC,WAAWT,KAAKU,OAAOqB,aACjC/B,KAAKgC,wDAGLhC,KAAKC,SAdLD,KAAK4B,gBAgBL5B,KAAKY,oDAdLZ,KAAKiC,cAALC,UAAAlC,KAAAC,OACHD,KAAAmC,2DAoBGnC,KAAKoC,iBAAiBC,UAnBfC,OAAA,4DAEPtC,KAAKuC,iBAALF,UAAAG,IAAA,+DAuBAxC,KAAKO,oBAAoB2B,UAAY,UACrClC,KAAKO,oBAAoB8B,UAAUG,IAAI,kEAGvCxC,KAAKO,oBAAoB8B,UAAUC,OAAO,kEAI1CtC,KAAKG,kBAAkB+B,UAAYO,aAAaC,QAAQ,oBAAsB,+CAtB9E1C,KAAK2C,cAALN,UAAAG,IAAA,yDA4BA,GAAII,OAAOH,aAAc,CACrB,IAAII,EAAoBJ,aAAaC,QAAQ,mBACzCG,GA1BH3C,EAAL4C,SAAoC7C,GAEvCD,KAAAC,OAAA4C,GA4BeJ,aAAaM,QAAQ,kBAAmB/C,KAAKC,SA1BpDmC,aAAiBC,QAAtB,kBAAuCrC,KAAAC","file":"game.js","sourcesContent":["class Game {\r\n    constructor(\r\n        mapElement,\r\n        scoreElement,\r\n        highScoreElement,\r\n        gameOverElement,\r\n        startElement,\r\n        startButtonElement\r\n    ) {\r\n        this._score = 0;\r\n        this._scoreElement = scoreElement;\r\n        this._highscoreElement = highScoreElement;\r\n        this._mapElement = mapElement;\r\n        this._gameOverElement = gameOverElement;\r\n        this._startElement = startElement;\r\n        this._startButtonElement = startButtonElement;\r\n\r\n        this._map = new SnakeMap(15);\r\n        this._map.render(this._mapElement);\r\n        this._map.placeApple();\r\n        this._snake = new Snake(3, this._map, [10, 10]);\r\n        this.renderScore();\r\n\r\n        document.addEventListener(\"snake:dead\", this.gameOver.bind(this));\r\n        document.addEventListener(\"snake:apple\", this.foundApple.bind(this));\r\n        document.addEventListener(\"keydown\", this.changeDirection.bind(this));\r\n\r\n        this.clickHandler = this.handleClick.bind(this);\r\n    }\r\n    handleClick(e) {\r\n        const x = e.clientX;\r\n        const y = e.clientY;\r\n        this._snake.handleClick([x, y]);\r\n    }\r\n    changeDirection(e) {\r\n        this._snake.changeDirection(e);\r\n    }\r\n    reset() {\r\n        this._mapElement.removeEventListener(\"click\", this.clickHandler);\r\n        this._score = 0;\r\n        this.renderScore();\r\n        this.hideGameOver();\r\n        this._snake.reset();\r\n    }\r\n\r\n    start() {\r\n        this._mapElement.addEventListener(\"click\", this.clickHandler);\r\n        this.hideStartElement();\r\n        this._snake.startMove();\r\n        this.hideStartButton();\r\n    }\r\n    gameOver() {\r\n        this._snake.stop();\r\n        this.renderGameOver();\r\n        this.showStartButton();\r\n    }\r\n    foundApple() {\r\n        this._map.placeApple(this._snake.getFields());\r\n        this.increaseScore();\r\n    }\r\n    increaseScore(){\r\n        this._score++;\r\n        this.saveHighscore();\r\n        this.renderScore();\r\n    }\r\n    renderScore() {\r\n        this._scoreElement.innerHTML = this._score;\r\n        this.renderHighscore();\r\n    }\r\n    renderGameOver() {\r\n        this._gameOverElement.classList.remove(\"game-over--hidden\");\r\n    }\r\n    hideGameOver() {\r\n        this._gameOverElement.classList.add(\"game-over--hidden\");\r\n    }\r\n    hideStartButton() {\r\n        this._startButtonElement.innerHTML = \"Restart\";\r\n        this._startButtonElement.classList.add(\"start-button--hidden\");\r\n    }\r\n    showStartButton() {\r\n        this._startButtonElement.classList.remove(\"start-button--hidden\");\r\n\r\n    }\r\n    renderHighscore() {\r\n        this._highscoreElement.innerHTML = localStorage.getItem(\"snake:highscore\") || \"0\";\r\n    }\r\n    hideStartElement() {\r\n        this._startElement.classList.add(\"start--hidden\");\r\n    }\r\n    saveHighscore() {\r\n        if (window.localStorage) {\r\n            let existingHighscore = localStorage.getItem(\"snake:highscore\");\r\n            if (existingHighscore) {\r\n                existingHighscore = parseInt(existingHighscore);\r\n\r\n                if (this._score > existingHighscore) {\r\n                    localStorage.setItem(\"snake:highscore\", this._score);\r\n                }\r\n            } else {\r\n                localStorage.setItem(\"snake:highscore\", this._score);\r\n            }\r\n        }\r\n    }\r\n}"]}