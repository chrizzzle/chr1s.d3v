{"version":3,"sources":["snake/src/js/game.js"],"names":["Game","mapElement","scoreElement","highScoreElement","gameOverElement","startElement","startButtonElement","this","_classCallCheck","_score","_scoreElement","_highscoreElement","_mapElement","_gameOverElement","_startButtonElement","_map","render","SnakeMap","_snake","placeApple","Snake","document","addEventListener","gameOver","bind","foundApple","changeDirection","clickHandler","handleClick","_createClass","key","e","value","x","clientX","clientY","y","renderScore","hideGameOver","reset","startMove","hideStartButton","hideStartElement","getFields","increaseScore","renderGameOver","showStartButton","classList","remove","add","innerHTML","localStorage","getItem","_startElement","window","existingHighscore","parseInt","setItem"],"mappings":"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","file":"game.js","sourcesContent":["class Game {\n    constructor(\n        mapElement,\n        scoreElement,\n        highScoreElement,\n        gameOverElement,\n        startElement,\n        startButtonElement\n    ) {\n        this._score = 0;\n        this._scoreElement = scoreElement;\n        this._highscoreElement = highScoreElement;\n        this._mapElement = mapElement;\n        this._gameOverElement = gameOverElement;\n        this._startElement = startElement;\n        this._startButtonElement = startButtonElement;\n\n        this._map = new SnakeMap(15);\n        this._map.render(this._mapElement);\n        this._map.placeApple();\n        this._snake = new Snake(3, this._map, [10, 10]);\n        this.renderScore();\n\n        document.addEventListener(\"snake:dead\", this.gameOver.bind(this));\n        document.addEventListener(\"snake:apple\", this.foundApple.bind(this));\n        document.addEventListener(\"keydown\", this.changeDirection.bind(this));\n\n        this.clickHandler = this.handleClick.bind(this);\n    }\n    handleClick(e) {\n        const x = e.clientX;\n        const y = e.clientY;\n        this._snake.handleClick([x, y]);\n    }\n    changeDirection(e) {\n        this._snake.changeDirection(e);\n    }\n    reset() {\n        this._mapElement.removeEventListener(\"click\", this.clickHandler);\n        this._score = 0;\n        this.renderScore();\n        this.hideGameOver();\n        this._snake.reset();\n    }\n\n    start() {\n        this._mapElement.addEventListener(\"click\", this.clickHandler);\n        this.hideStartElement();\n        this._snake.startMove();\n        this.hideStartButton();\n    }\n    gameOver() {\n        this._snake.stop();\n        this.renderGameOver();\n        this.showStartButton();\n    }\n    foundApple() {\n        this._map.placeApple(this._snake.getFields());\n        this.increaseScore();\n    }\n    increaseScore(){\n        this._score++;\n        this.saveHighscore();\n        this.renderScore();\n    }\n    renderScore() {\n        this._scoreElement.innerHTML = this._score;\n        this.renderHighscore();\n    }\n    renderGameOver() {\n        this._gameOverElement.classList.remove(\"game-over--hidden\");\n    }\n    hideGameOver() {\n        this._gameOverElement.classList.add(\"game-over--hidden\");\n    }\n    hideStartButton() {\n        this._startButtonElement.innerHTML = \"Restart\";\n        this._startButtonElement.classList.add(\"start-button--hidden\");\n    }\n    showStartButton() {\n        this._startButtonElement.classList.remove(\"start-button--hidden\");\n\n    }\n    renderHighscore() {\n        this._highscoreElement.innerHTML = localStorage.getItem(\"snake:highscore\") || \"0\";\n    }\n    hideStartElement() {\n        this._startElement.classList.add(\"start--hidden\");\n    }\n    saveHighscore() {\n        if (window.localStorage) {\n            let existingHighscore = localStorage.getItem(\"snake:highscore\");\n            if (existingHighscore) {\n                existingHighscore = parseInt(existingHighscore);\n\n                if (this._score > existingHighscore) {\n                    localStorage.setItem(\"snake:highscore\", this._score);\n                }\n            } else {\n                localStorage.setItem(\"snake:highscore\", this._score);\n            }\n        }\n    }\n}"]}