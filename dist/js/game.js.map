{"version":3,"sources":["snake/src/js/game.js"],"names":["Game","mapElement","scoreElement","highScoreElement","gameOverElement","startElement","startButtonElement","this","_classCallCheck","_score","_scoreElement","_highscoreElement","_mapElement","_gameOverElement","_startButtonElement","_map","render","SnakeMap","_snake","placeApple","Snake","document","addEventListener","gameOver","bind","foundApple","changeDirection","clickHandler","handleClick","_createClass","key","e","value","x","clientX","clientY","y","renderScore","hideGameOver","reset","startMove","hideStartButton","hideStartElement","getFields","increaseScore","renderGameOver","showStartButton","classList","remove","add","innerHTML","localStorage","getItem","_startElement","window","existingHighscore","parseInt","setItem"],"mappings":"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","file":"game.js","sourcesContent":["class Game {\r\n    constructor(\r\n        mapElement,\r\n        scoreElement,\r\n        highScoreElement,\r\n        gameOverElement,\r\n        startElement,\r\n        startButtonElement\r\n    ) {\r\n        this._score = 0;\r\n        this._scoreElement = scoreElement;\r\n        this._highscoreElement = highScoreElement;\r\n        this._mapElement = mapElement;\r\n        this._gameOverElement = gameOverElement;\r\n        this._startElement = startElement;\r\n        this._startButtonElement = startButtonElement;\r\n\r\n        this._map = new SnakeMap(15);\r\n        this._map.render(this._mapElement);\r\n        this._map.placeApple();\r\n        this._snake = new Snake(3, this._map, [10, 10]);\r\n        this.renderScore();\r\n\r\n        document.addEventListener(\"snake:dead\", this.gameOver.bind(this));\r\n        document.addEventListener(\"snake:apple\", this.foundApple.bind(this));\r\n        document.addEventListener(\"keydown\", this.changeDirection.bind(this));\r\n\r\n        this.clickHandler = this.handleClick.bind(this);\r\n    }\r\n    handleClick(e) {\r\n        const x = e.clientX;\r\n        const y = e.clientY;\r\n        this._snake.handleClick([x, y]);\r\n    }\r\n    changeDirection(e) {\r\n        this._snake.changeDirection(e);\r\n    }\r\n    reset() {\r\n        this._mapElement.removeEventListener(\"click\", this.clickHandler);\r\n        this._score = 0;\r\n        this.renderScore();\r\n        this.hideGameOver();\r\n        this._snake.reset();\r\n    }\r\n\r\n    start() {\r\n        this._mapElement.addEventListener(\"click\", this.clickHandler);\r\n        this.hideStartElement();\r\n        this._snake.startMove();\r\n        this.hideStartButton();\r\n    }\r\n    gameOver() {\r\n        this._snake.stop();\r\n        this.renderGameOver();\r\n        this.showStartButton();\r\n    }\r\n    foundApple() {\r\n        this._map.placeApple(this._snake.getFields());\r\n        this.increaseScore();\r\n    }\r\n    increaseScore(){\r\n        this._score++;\r\n        this.saveHighscore();\r\n        this.renderScore();\r\n    }\r\n    renderScore() {\r\n        this._scoreElement.innerHTML = this._score;\r\n        this.renderHighscore();\r\n    }\r\n    renderGameOver() {\r\n        this._gameOverElement.classList.remove(\"game-over--hidden\");\r\n    }\r\n    hideGameOver() {\r\n        this._gameOverElement.classList.add(\"game-over--hidden\");\r\n    }\r\n    hideStartButton() {\r\n        this._startButtonElement.innerHTML = \"Restart\";\r\n        this._startButtonElement.classList.add(\"start-button--hidden\");\r\n    }\r\n    showStartButton() {\r\n        this._startButtonElement.classList.remove(\"start-button--hidden\");\r\n\r\n    }\r\n    renderHighscore() {\r\n        this._highscoreElement.innerHTML = localStorage.getItem(\"snake:highscore\") || \"0\";\r\n    }\r\n    hideStartElement() {\r\n        this._startElement.classList.add(\"start--hidden\");\r\n    }\r\n    saveHighscore() {\r\n        if (window.localStorage) {\r\n            let existingHighscore = localStorage.getItem(\"snake:highscore\");\r\n            if (existingHighscore) {\r\n                existingHighscore = parseInt(existingHighscore);\r\n\r\n                if (this._score > existingHighscore) {\r\n                    localStorage.setItem(\"snake:highscore\", this._score);\r\n                }\r\n            } else {\r\n                localStorage.setItem(\"snake:highscore\", this._score);\r\n            }\r\n        }\r\n    }\r\n}"]}