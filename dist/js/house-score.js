"use strict";for(var resultField,totalMax,ranges=document.querySelectorAll(".form__range"),scoreField=document.querySelector(".form__score-number"),radios=document.querySelectorAll(".form__radio"),maxPriceField=document.getElementById("max-price"),idealSpaceField=document.getElementById("ideal-space-house"),idealSpacePropertyField=document.getElementById("ideal-space-property"),priceField=document.getElementById("price"),spaceField=document.getElementById("space-house"),spacePropertyField=document.getElementById("space-property"),calcScore=function(){for(var e,r,t,a,n,s=0,o=0,i=0;i<ranges.length;i++)e=parseInt(ranges[i].getAttribute("max"),10),t=!!ranges[i].dataset.inverse,n=getGrading(ranges[i]),r=parseInt(ranges[i].value,10),o+=n,a=t?1-r/e:r/e,s+=a*=n;return s/o},getColorClass=function(e,r,t,a){var n=t?1-e/r:e/r,s={1:{green:.5,orange:.25},2:{green:2/3,orange:1/3},3:{green:.75,orange:.5}};return n>s[a].green?"form__result--green":n>s[a].orange?"form__result--orange":"form__result--red"},getGrading=function(e){return parseInt(e.closest(".form__group").querySelector(".form__radio:checked").value,10)},setScore=function(){var e=calcScore(),r=getColorClass(e,1,!1,2);scoreField.innerHTML=Math.ceil(100*calcScore())+"/ 100",scoreField.classList.add(r)},setResult=function(e){(resultField=e.closest(".form__group").querySelector(".form__result")).innerHTML=e.value,resultField.classList.remove("form__result--red"),resultField.classList.remove("form__result--green"),resultField.classList.remove("form__result--orange");var r=getGrading(e),t=getColorClass(parseInt(e.value),parseInt(e.getAttribute("max")),!!e.dataset.inverse,r);resultField.classList.add(t)},onRangeInput=function(e){return function(){setResult(e),setScore()}},setMax=function(e,r){e.setAttribute("max",r)},i=0;i<ranges.length;i++)ranges[i].addEventListener("input",onRangeInput(ranges[i])),setResult(ranges[i]),totalMax+=parseInt(ranges[i].getAttribute("max"),10);for(var _i=0;_i<radios.length;_i++){var range=void 0;range=radios[_i].closest(".form__group").querySelector(".form__range"),radios[_i].addEventListener("input",onRangeInput(range))}maxPriceField.addEventListener("change",function(){setMax(priceField,maxPriceField.value)}),idealSpaceField.addEventListener("change",function(){setMax(spaceField,idealSpaceField.value)}),idealSpacePropertyField.addEventListener("change",function(){setMax(spacePropertyField,idealSpacePropertyField.value)}),setScore();