"use strict";var dashboardAdd=document.querySelector(".dashboard__add"),dashboardEntries=document.querySelector(".dashboard__entries"),dashboardTotal=document.querySelector(".dashboard__total"),form=document.querySelector(".form"),dashboardAddForm=document.querySelector(".dashboard__add-entry"),dashboardAddClose=document.querySelector(".dashboard__add-entry-close"),storageKey="chr1s.d3v:centVisualizer",readEntries=function(){return window.localStorage?JSON.parse(window.localStorage.getItem(storageKey)||"[]"):(console.error("localStorage not found."),[])},deleteEntry=function(e){if(window.localStorage){var n=e.currentTarget.dataset.expense,r=readEntries().filter(function(e){return e.expense!==n});window.localStorage.setItem(storageKey,JSON.stringify(r)),renderEntries(),renderTotal()}else console.error("localStorage not found.")},createEntry=function(e){if(e.preventDefault(),e.stopPropagation(),window.localStorage){var n=e.currentTarget,r=new FormData(n),t=parseInt(r.get("amountPerMonth"),10),a=calcAnimationDuration(t),d=100*calcEuroPerSecond(t),o={expense:r.get("expense"),amountPerMonth:t,centsPerSecond:d.toFixed(4),animationDuration:a},s=readEntries();s.push(o),window.localStorage.setItem(storageKey,JSON.stringify(s)),renderEntries(),renderTotal()}else console.error("localStorage not found.")},calcEuroPerSecond=function(e){return e/30/24/60/60},calcAnimationDuration=function(e){var n=100*calcEuroPerSecond(e);return"".concat(Math.round(1/n*1e3),"ms")},calcTotalItem=function(){var e=readEntries().reduce(function(e,n){return e.amountPerMonth+=parseInt(n.amountPerMonth,10),e.centsPerSecond+=parseFloat(n.centsPerSecond),e},{amountPerMonth:0,centsPerSecond:0,expense:"Total"});return e.centsPerSecond=e.centsPerSecond.toFixed(4),e.animationDuration=calcAnimationDuration(e.amountPerMonth),e},renderItem=function(e,n){var r=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),o=document.createElement("button");return r.classList.add("dashboard__entry"),t.classList.add("dashboard__entry-inner"),t.style.animationDuration=e.animationDuration,d.classList.add("dashboard__entry-amount"),d.innerHTML="".concat(e.amountPerMonth,"€ / mo. = ").concat(e.centsPerSecond,"¢ / s"),a.classList.add("dashboard__entry-text"),a.innerHTML=e.expense,r.appendChild(t),r.appendChild(a),r.appendChild(d),n||(o.classList.add("dashboard__entry-del"),o.dataset.expense=e.expense,o.classList.add("material-icons"),o.innerHTML="close",o.addEventListener("click",deleteEntry),r.appendChild(o)),r},renderTotal=function(){dashboardTotal.innerHTML="";var e=calcTotalItem();if(0!==e.amountPerMonth){var n=renderItem(e,!0);dashboardTotal.appendChild(n)}},renderEntries=function(){var n,e=readEntries();dashboardEntries.innerHTML="",e.forEach(function(e){n=renderItem(e),dashboardEntries.appendChild(n)})},init=function(){0<readEntries().length&&(renderEntries(),renderTotal())};form.addEventListener("submit",createEntry),dashboardAdd.addEventListener("click",function(){dashboardAddForm.classList.remove("dashboard__add-entry--hidden"),dashboardAdd.classList.add("dashboard__add--hidden")}),dashboardAddClose.addEventListener("click",function(){dashboardAddForm.classList.add("dashboard__add-entry--hidden"),dashboardAdd.classList.remove("dashboard__add--hidden")}),init();
//# sourceMappingURL=centvisualizer.js.map
