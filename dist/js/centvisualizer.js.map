{"version":3,"sources":["centvisualizer/src/js/centvisualizer.js"],"names":["dashboardAdd","document","querySelector","dashboardEntries","dashboardTotal","form","dashboardAddForm","storageKey","readEntries","localStorage","JSON","parse","window","getItem","error","deleteEntry","e","expense","currentTarget","dataset","newEntries","filter","entry","setItem","stringify","renderEntries","console","createEntry","stopPropagation","euroPerMonth","entries","preventDefault","amount","value","centsPerSecond","save","amountPerMonth","calcAnimationDuration","toFixed","animationDuration","push","calcEuroPerSecond","centPerSecond","round","concat","Math","item","reduce","acc","parseInt","parseFloat","renderItem","suppressDelete","chartInner","chartDelete","chart","classList","add","createElement","chartAmount","chartText","innerHTML","appendChild","renderTotal","calcTotalItem","totalItem","items","addEventListener","remove","dashboardAddClose","init"],"mappings":"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","file":"centvisualizer.js","sourcesContent":["const dashboardAdd = document.querySelector(\".dashboard__add\");\nconst dashboardEntries = document.querySelector(\".dashboard__entries\");\nconst dashboardTotal = document.querySelector(\".dashboard__total\");\nconst form = document.querySelector(\".form\");\nconst dashboardAddForm = document.querySelector(\".dashboard__add-entry\");\nconst dashboardAddClose = document.querySelector(\".dashboard__add-entry-close\");\nconst storageKey = \"chr1s.d3v:centVisualizer\";\n\nconst readEntries = () => {\n    if (!window.localStorage) {\n        console.error(\"localStorage not found.\");\n        return [];\n    }\n    return JSON.parse(window.localStorage.getItem(storageKey) || \"[]\");\n};\n\nconst deleteEntry = (e) => {\n    if (!window.localStorage) {\n        console.error(\"localStorage not found.\");\n        return;\n    }\n    const button = e.currentTarget;\n    const expense = button.dataset.expense;\n    const entries = readEntries();\n    const newEntries = entries.filter(entry => entry.expense !== expense);\n    window.localStorage.setItem(storageKey, JSON.stringify(newEntries));\n    renderEntries();\n    renderTotal();\n};\n\nconst createEntry = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!window.localStorage) {\n        console.error(\"localStorage not found.\");\n        return;\n    }\n    const form = e.currentTarget;\n    const amount = form.querySelector(\"#amount\").value;\n    const expense = form.querySelector(\"#expense\").value;\n    const euroPerMonth = parseInt(amount, 10);\n    const animationDuration = calcAnimationDuration(euroPerMonth);\n    const centsPerSecond = calcEuroPerSecond(euroPerMonth) * 100;\n    const save = {\n        expense: expense,\n        amountPerMonth: euroPerMonth,\n        centsPerSecond: centsPerSecond.toFixed(4),\n        animationDuration\n    };\n    const entries = readEntries();\n    entries.push(save);\n    window.localStorage.setItem(storageKey, JSON.stringify(entries));\n    renderEntries();\n    renderTotal();\n};\n\nconst calcEuroPerSecond = (euroPerMonth) => {\n    return euroPerMonth / 30 / 24 / 60 / 60;\n};\n\nconst calcAnimationDuration = (amountPerMonth) => {\n    const centPerSecond = calcEuroPerSecond(amountPerMonth) * 100;\n    return `${Math.round((1 / centPerSecond) * 1000) }ms`;\n};\n\nconst calcTotalItem = () => {\n    const items = readEntries();\n    let item = items.reduce((acc, item) => {\n        acc.amountPerMonth += parseInt(item.amountPerMonth, 10);\n        acc.centsPerSecond += parseFloat(item.centsPerSecond);\n        return acc;\n    }, {\n        amountPerMonth: 0,\n        centsPerSecond: 0,\n        expense: \"Total\"\n    });\n\n    item.centsPerSecond = item.centsPerSecond.toFixed(4);\n    item.animationDuration = calcAnimationDuration(item.amountPerMonth);\n\n    return item;\n};\n\nconst renderItem = (item, suppressDelete) => {\n    const chart = document.createElement(\"div\");\n    const chartInner = document.createElement(\"div\");\n    const chartText = document.createElement(\"div\");\n    const chartAmount = document.createElement(\"div\");\n    const chartDelete = document.createElement(\"button\");\n\n    chart.classList.add(\"dashboard__entry\");\n    chartInner.classList.add(\"dashboard__entry-inner\");\n    chartInner.style.animationDuration = item.animationDuration;\n    chartAmount.classList.add(\"dashboard__entry-amount\");\n    chartAmount.innerHTML = `${item.amountPerMonth}€ / mo. = ${item.centsPerSecond}¢ / s`;\n    chartText.classList.add(\"dashboard__entry-text\");\n    chartText.innerHTML = item.expense;\n    chart.appendChild(chartInner);\n    chart.appendChild(chartText);\n    chart.appendChild(chartAmount);\n\n    if (suppressDelete) {\n        return chart;\n    }\n\n    chartDelete.classList.add(\"dashboard__entry-del\");\n    chartDelete.dataset.expense = item.expense;\n    chartDelete.classList.add(\"material-icons\");\n    chartDelete.innerHTML = \"close\";\n    chartDelete.addEventListener(\"click\", deleteEntry);\n    chart.appendChild(chartDelete);\n    return chart;\n};\n\nconst renderTotal = () => {\n    dashboardTotal.innerHTML = \"\";\n    const totalItem = calcTotalItem();\n\n    if (totalItem.amountPerMonth !== 0) {\n        const chart = renderItem(totalItem, true)\n        dashboardTotal.appendChild(chart);\n    }\n}\n\nconst renderEntries = () => {\n    const items = readEntries();\n    let chart;\n    dashboardEntries.innerHTML = \"\";\n    items.forEach((item) => {\n        chart = renderItem(item)\n        dashboardEntries.appendChild(chart);\n    });\n};\n\nconst init = function () {\n    if (readEntries().length > 0) {\n        renderEntries();\n        renderTotal();\n    }\n}\n\nform.addEventListener(\"submit\", createEntry)\ndashboardAdd.addEventListener(\"click\", () => {\n    dashboardAddForm.classList.remove(\"dashboard__add-entry--hidden\");\n    dashboardAdd.classList.add(\"dashboard__add--hidden\");\n});\ndashboardAddClose.addEventListener(\"click\", () => {\n    dashboardAddForm.classList.add(\"dashboard__add-entry--hidden\");\n    dashboardAdd.classList.remove(\"dashboard__add--hidden\");\n})\ninit();\n"]}