"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Game=function(){function e(){_classCallCheck(this,e),this._score=0,this._scoreElement=document.querySelector(".score__score"),this._highscoreElement=document.querySelector(".score__highscore"),this._mapElement=document.querySelector(".map"),this._gameOverElement=document.querySelector(".game-over"),document.addEventListener("snake:dead",this.gameOver.bind(this)),document.addEventListener("snake:apple",this.foundApple.bind(this)),this._map=new Map(15),this._map.render(this._mapElement),this._map.placeApple(),this._snake=new Snake(3,this._map,[10,10]),this.renderScore()}return _createClass(e,[{key:"start",value:function(){this._score=0,this.renderScore(),this.hideGameOver(),this._snake.reset(),this._snake.startMove()}},{key:"gameOver",value:function(){this._snake.stop(),this.renderGameOver()}},{key:"foundApple",value:function(){this._map.placeApple(this._snake.getFields()),this.increaseScore()}},{key:"increaseScore",value:function(){this._score++,this.saveHighscore(),this.renderScore()}},{key:"renderScore",value:function(){this._scoreElement.innerHTML=this._score,this.renderHighscore()}},{key:"renderGameOver",value:function(){this._gameOverElement.classList.remove("game-over--hidden")}},{key:"hideGameOver",value:function(){this._gameOverElement.classList.add("game-over--hidden")}},{key:"renderHighscore",value:function(){this._highscoreElement.innerHTML=localStorage.getItem("snake:highscore")||"0"}},{key:"saveHighscore",value:function(){if(window.localStorage){var e=localStorage.getItem("snake:highscore");e?(e=parseInt(e),this._score>e&&localStorage.setItem("snake:highscore",this._score)):localStorage.setItem("snake:highscore",this._score)}}}]),e}();