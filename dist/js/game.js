"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Game=function(){function r(e,t,n,s,i,a){_classCallCheck(this,r),this._score=0,this._scoreElement=t,this._highscoreElement=n,this._mapElement=e,this._gameOverElement=s,this._startElement=i,this._startButtonElement=a,this._map=new SnakeMap(15),this._map.render(this._mapElement),this._map.placeApple(),this._snake=new Snake(3,this._map,[10,10]),this.renderScore(),document.addEventListener("snake:dead",this.gameOver.bind(this)),document.addEventListener("snake:apple",this.foundApple.bind(this)),document.addEventListener("keydown",this.changeDirection.bind(this)),this.clickHandler=this.handleClick.bind(this)}return _createClass(r,[{key:"handleClick",value:function(e){var t=e.clientX,n=e.clientY;this._snake.handleClick([t,n])}},{key:"changeDirection",value:function(e){this._snake.changeDirection(e)}},{key:"reset",value:function(){this._mapElement.removeEventListener("click",this.clickHandler),this._score=0,this.renderScore(),this.hideGameOver(),this._snake.reset()}},{key:"start",value:function(){this._mapElement.addEventListener("click",this.clickHandler),this.hideStartElement(),this._snake.startMove(),this.hideStartButton()}},{key:"gameOver",value:function(){this._snake.stop(),this.renderGameOver(),this.showStartButton()}},{key:"foundApple",value:function(){this._map.placeApple(this._snake.getFields()),this.increaseScore()}},{key:"increaseScore",value:function(){this._score++,this.saveHighscore(),this.renderScore()}},{key:"renderScore",value:function(){this._scoreElement.innerHTML=this._score,this.renderHighscore()}},{key:"renderGameOver",value:function(){this._gameOverElement.classList.remove("game-over--hidden")}},{key:"hideGameOver",value:function(){this._gameOverElement.classList.add("game-over--hidden")}},{key:"hideStartButton",value:function(){this._startButtonElement.innerHTML="Restart",this._startButtonElement.classList.add("start-button--hidden")}},{key:"showStartButton",value:function(){this._startButtonElement.classList.remove("start-button--hidden")}},{key:"renderHighscore",value:function(){this._highscoreElement.innerHTML=localStorage.getItem("snake:highscore")||"0"}},{key:"hideStartElement",value:function(){this._startElement.classList.add("start--hidden")}},{key:"saveHighscore",value:function(){if(window.localStorage){var e=localStorage.getItem("snake:highscore");e?(e=parseInt(e),this._score>e&&localStorage.setItem("snake:highscore",this._score)):localStorage.setItem("snake:highscore",this._score)}}}]),r}();
//# sourceMappingURL=game.js.map
