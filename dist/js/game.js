"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var Game=function(){function o(e,t,n,i,r,s){_classCallCheck(this,o),this._score=0,this._scoreElement=t,this._highscoreElement=n,this._mapElement=e,this._gameOverElement=i,this._startElement=r,this._startButtonElement=s,this._map=new SnakeMap(15),this._map.render(this._mapElement),this._map.placeApple(),this._snake=new Snake(3,this._map,[10,10]),this.renderScore(),document.addEventListener("snake:dead",this.gameOver.bind(this)),document.addEventListener("snake:apple",this.foundApple.bind(this)),document.addEventListener("keydown",this.changeDirection.bind(this)),this.clickHandler=this.handleClick.bind(this)}return _createClass(o,[{key:"handleClick",value:function(e){var t=e.clientX,e=e.clientY;this._snake.handleClick([t,e])}},{key:"changeDirection",value:function(e){this._snake.changeDirection(e)}},{key:"reset",value:function(){this._mapElement.removeEventListener("click",this.clickHandler),this._score=0,this.renderScore(),this.hideGameOver(),this._snake.reset()}},{key:"start",value:function(){this._mapElement.addEventListener("click",this.clickHandler),this.hideStartElement(),this._snake.startMove(),this.hideStartButton()}},{key:"gameOver",value:function(){this._snake.stop(),this.renderGameOver(),this.showStartButton()}},{key:"foundApple",value:function(){this._map.placeApple(this._snake.getFields()),this.increaseScore()}},{key:"increaseScore",value:function(){this._score++,this.saveHighscore(),this.renderScore()}},{key:"renderScore",value:function(){this._scoreElement.innerHTML=this._score,this.renderHighscore()}},{key:"renderGameOver",value:function(){this._gameOverElement.classList.remove("game-over--hidden")}},{key:"hideGameOver",value:function(){this._gameOverElement.classList.add("game-over--hidden")}},{key:"hideStartButton",value:function(){this._startButtonElement.innerHTML="Restart",this._startButtonElement.classList.add("start-button--hidden")}},{key:"showStartButton",value:function(){this._startButtonElement.classList.remove("start-button--hidden")}},{key:"renderHighscore",value:function(){this._highscoreElement.innerHTML=localStorage.getItem("snake:highscore")||"0"}},{key:"hideStartElement",value:function(){this._startElement.classList.add("start--hidden")}},{key:"saveHighscore",value:function(){var e;window.localStorage&&(!(e=localStorage.getItem("snake:highscore"))||(e=parseInt(e),this._score>e))&&localStorage.setItem("snake:highscore",this._score)}}]),o}();
//# sourceMappingURL=game.js.map
